# 01.1 - Vue d'Ensemble de l'Architecture

**Auteur** : Alaeddine BEN RHOUMA
**Date** : 3 F√©vrier 2026
**Version** : 2.0 (PRD-19)

---

## üéØ Vue Globale du Syst√®me

Korrigo est une plateforme web moderne de correction d'examens num√©riques bas√©e sur une architecture **3-tiers** :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          COUCHE PR√âSENTATION                              ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ                     Frontend Vue.js 3                          ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Single Page Application (SPA)                               ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Composition API + TypeScript                                ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Interfaces: Admin, Teacher, Student                         ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ PDF.js pour annotation                                      ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    ‚Üï HTTP/REST
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          COUCHE APPLICATION                               ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ                   Backend Django 4.2                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Django REST Framework (DRF)                                 ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Gunicorn (3 workers)                                        ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Applications: exams, grading, students, identification      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ OCR Multi-layer (Tesseract + EasyOCR + PaddleOCR)          ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ               Workers Celery (Asynchrone)                      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Traitement PDF batch                                        ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ OCR multi-page                                              ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Export r√©sultats                                            ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    ‚Üï SQL
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          COUCHE DONN√âES                                   ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ  ‚îÇ PostgreSQL 15       ‚îÇ    ‚îÇ    Redis 7       ‚îÇ                        ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Base principale   ‚îÇ    ‚îÇ ‚Ä¢ Cache          ‚îÇ                        ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ 20+ tables        ‚îÇ    ‚îÇ ‚Ä¢ Celery broker  ‚îÇ                        ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Relations         ‚îÇ    ‚îÇ ‚Ä¢ Sessions       ‚îÇ                        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ               Stockage Fichiers                             ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  /media/                                                    ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ    ‚îú‚îÄ exams/source/         (PDFs originaux)               ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ    ‚îú‚îÄ exams/pages/          (Pages extraites)              ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ    ‚îú‚îÄ copies/booklets/      (Copies par √©tudiant)          ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ    ‚îî‚îÄ copies/annotated/     (Copies corrig√©es)             ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üèóÔ∏è Architecture D√©taill√©e par Composant

### 1. Reverse Proxy - Nginx

**R√¥le** : Point d'entr√©e unique pour toutes les requ√™tes

```
                    Internet
                       ‚Üì
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ  Nginx :80    ‚îÇ
               ‚îÇ  (ou :443)    ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ            ‚îÇ            ‚îÇ
    [Static]      [API]        [Media]
    /assets/    /api/*      /media/*
       ‚Üì            ‚Üì            ‚Üì
  Frontend    Backend      Fichiers
   (Vue.js)    (Django)    (Uploads)
```

**Fonctions** :
- Servir le frontend statique (Vue.js build)
- Proxy des requ√™tes API vers Django
- Servir les fichiers m√©dia (PDFs, images)
- SSL/TLS termination
- Compression gzip
- Security headers
- Rate limiting

**Configuration** :
```nginx
# Fichier: infra/nginx/nginx.conf
server {
    listen 80;
    client_max_body_size 100M;  # Upload PDFs volumineux

    # Frontend
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
    }

    # API Backend
    location /api/ {
        proxy_pass http://backend:8000;
        proxy_set_header Host $host;
    }

    # Fichiers statiques Django
    location /static/ {
        alias /app/staticfiles/;
    }

    # Fichiers m√©dia (PDFs, images)
    location /media/ {
        alias /app/media/;
    }
}
```

---

### 2. Backend Django

**R√¥le** : Logique m√©tier, API REST, orchestration

#### 2.1 Structure des Applications Django

```
backend/
‚îú‚îÄ‚îÄ core/                    # Configuration principale
‚îÇ   ‚îú‚îÄ‚îÄ settings.py         # Settings Django
‚îÇ   ‚îú‚îÄ‚îÄ urls.py             # Routes principales
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py             # WSGI application
‚îÇ
‚îú‚îÄ‚îÄ exams/                   # Gestion des examens
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # Exam, GradingStructure
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py      # DRF serializers
‚îÇ   ‚îî‚îÄ‚îÄ services.py         # Logique m√©tier
‚îÇ
‚îú‚îÄ‚îÄ grading/                 # Correction et notation
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # Copy, Grade, Annotation
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # API correction
‚îÇ   ‚îú‚îÄ‚îÄ services.py         # GradingService
‚îÇ   ‚îî‚îÄ‚îÄ tasks.py            # Celery tasks
‚îÇ
‚îú‚îÄ‚îÄ students/                # Gestion √©l√®ves
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # Student, StudentResult
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # Portail √©l√®ve
‚îÇ   ‚îî‚îÄ‚îÄ services.py         # Authentication √©l√®ve
‚îÇ
‚îú‚îÄ‚îÄ identification/          # OCR et identification
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # OCRResult
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # Desk d'identification
‚îÇ   ‚îî‚îÄ‚îÄ services.py         # OCR orchestration
‚îÇ
‚îî‚îÄ‚îÄ processing/              # Traitement PDF/OCR
    ‚îú‚îÄ‚îÄ models.py           # BatchProcessingJob
    ‚îú‚îÄ‚îÄ services/
    ‚îÇ   ‚îú‚îÄ‚îÄ pdf_splitter.py      # Split PDF
    ‚îÇ   ‚îú‚îÄ‚îÄ batch_processor.py   # Traitement A3
    ‚îÇ   ‚îú‚îÄ‚îÄ ocr_engine.py        # OCR multi-layer
    ‚îÇ   ‚îî‚îÄ‚îÄ vision.py            # D√©tection zones
    ‚îî‚îÄ‚îÄ tasks.py            # Celery tasks async
```

#### 2.2 Stack Technique Backend

| Composant | Version | R√¥le |
|-----------|---------|------|
| **Python** | 3.9 | Langage principal |
| **Django** | 4.2.27 | Framework web |
| **Django REST Framework** | 3.16.1 | API REST |
| **PostgreSQL** | 15 | Base de donn√©es |
| **Redis** | 7 | Cache + Celery broker |
| **Celery** | 5.6.2 | Traitement asynchrone |
| **Gunicorn** | 23.0.0 | WSGI server (production) |
| **PyMuPDF** | 1.23.26 | Manipulation PDF |
| **Tesseract** | 5.5.0 | OCR (texte imprim√©) |
| **EasyOCR** | 1.7.2 | OCR (manuscrit) |
| **PaddleOCR** | 3.4.0 | OCR (robuste) |
| **OpenCV** | 4.8.1 | Traitement image |
| **NumPy** | 1.26.4 | Calcul num√©rique |

#### 2.3 Middleware et S√©curit√©

```python
# Configuration middleware (settings.py)
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'csp.middleware.CSPMiddleware',  # Content Security Policy
]

# S√©curit√©
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
X_FRAME_OPTIONS = 'DENY'
SESSION_COOKIE_HTTPONLY = True
CSRF_COOKIE_HTTPONLY = True

# En production avec SSL
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
```

---

### 3. Frontend Vue.js

**R√¥le** : Interface utilisateur interactive

#### 3.1 Structure Frontend

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.js                # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ App.vue                # Root component
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ router/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js           # Vue Router config
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ stores/                # Pinia stores (state management)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js            # Authentication state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exams.js           # Exams state
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ grading.js         # Grading state
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/              # API communication
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js             # Axios instance
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ examService.js     # Exam API calls
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gradingService.js  # Grading API calls
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ views/                 # Page components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.vue
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExamCreate.vue
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ IdentificationDesk.vue
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ teacher/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CorrectionInterface.vue
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CopyList.vue
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ student/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ StudentPortal.vue
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CopyView.vue
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ components/            # Reusable components
‚îÇ       ‚îú‚îÄ‚îÄ PdfViewer.vue      # PDF.js wrapper
‚îÇ       ‚îú‚îÄ‚îÄ AnnotationTool.vue # Annotation interface
‚îÇ       ‚îî‚îÄ‚îÄ GradingForm.vue    # Form notation
‚îÇ
‚îî‚îÄ‚îÄ public/
    ‚îî‚îÄ‚îÄ index.html             # HTML template
```

#### 3.2 Stack Technique Frontend

| Composant | Version | R√¥le |
|-----------|---------|------|
| **Vue.js** | 3.x | Framework UI |
| **Vue Router** | 4.x | Routing |
| **Pinia** | 2.x | State management |
| **Axios** | 1.x | HTTP client |
| **PDF.js** | 3.x | Visualisation PDF |
| **Vite** | 4.x | Build tool |
| **TypeScript** | 5.x | Type safety |

#### 3.3 Interfaces par Profil

**Admin** :
- Dashboard global
- Cr√©ation/gestion examens
- Import CSV √©l√®ves
- Upload PDF scans
- Desk d'identification (OCR)
- Gestion utilisateurs

**Teacher** :
- Liste des copies √† corriger
- Interface de correction (PDF + annotations)
- Attribution des notes
- Commentaires
- Finalisation

**Student** :
- Authentification (email + date naissance)
- Consultation copie corrig√©e
- Visualisation annotations
- T√©l√©chargement PDF

---

### 4. Base de Donn√©es PostgreSQL

**R√¥le** : Persistence des donn√©es

#### 4.1 Tables Principales

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      User       ‚îÇ  (Django auth)
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ id              ‚îÇ
‚îÇ username        ‚îÇ
‚îÇ email           ‚îÇ
‚îÇ is_staff        ‚îÇ
‚îÇ is_superuser    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ       ‚îÇ               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Exam      ‚îÇ ‚îÇ     ‚îÇ    Student       ‚îÇ
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ id (UUID)    ‚îÇ ‚îÇ     ‚îÇ id               ‚îÇ
‚îÇ name         ‚îÇ ‚îÇ     ‚îÇ first_name       ‚îÇ
‚îÇ date         ‚îÇ ‚îÇ     ‚îÇ last_name        ‚îÇ
‚îÇ pdf_source   ‚îÇ ‚îÇ     ‚îÇ email            ‚îÇ
‚îÇ creator_id   ‚îÇ ‚îÇ     ‚îÇ date_of_birth    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ       ‚îÇ               ‚îÇ
         ‚îÇ       ‚îÇ               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê
‚îÇ           Copy                    ‚îÇ
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ id (UUID)                         ‚îÇ
‚îÇ exam_id (FK)                      ‚îÇ
‚îÇ student_id (FK, nullable)         ‚îÇ
‚îÇ anonymous_id                      ‚îÇ
‚îÇ status (STAGING/READY/LOCKED...)  ‚îÇ
‚îÇ is_identified                     ‚îÇ
‚îÇ corrector_id (FK, nullable)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ             ‚îÇ              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Booklet     ‚îÇ ‚îÇ   Grade   ‚îÇ ‚îÇ  Annotation   ‚îÇ
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ id            ‚îÇ ‚îÇ id        ‚îÇ ‚îÇ id            ‚îÇ
‚îÇ copy_id       ‚îÇ ‚îÇ copy_id   ‚îÇ ‚îÇ copy_id       ‚îÇ
‚îÇ sequence      ‚îÇ ‚îÇ question_id‚îÇ ‚îÇ page_number   ‚îÇ
‚îÇ pdf_file      ‚îÇ ‚îÇ score     ‚îÇ ‚îÇ tool_type     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ coordinates   ‚îÇ
                                 ‚îÇ content       ‚îÇ
                                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 4.2 Relations Cl√©s

- **User ‚Üí Exam** : Un administrateur cr√©e plusieurs examens
- **Exam ‚Üí Copy** : Un examen contient plusieurs copies
- **Student ‚Üí Copy** : Un √©l√®ve peut avoir plusieurs copies (diff√©rents examens)
- **Copy ‚Üí Booklet** : Une copie contient plusieurs cahiers (multi-pages)
- **Copy ‚Üí Grade** : Une copie re√ßoit plusieurs notes (une par question)
- **Copy ‚Üí Annotation** : Une copie peut avoir plusieurs annotations

---

### 5. Celery - Traitement Asynchrone

**R√¥le** : Ex√©cuter les t√¢ches longues en arri√®re-plan

#### 5.1 Broker et Backend

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Django    ‚îÇ publish ‚îÇ     Redis      ‚îÇ
‚îÇ   (Client)   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ (Message Queue)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                  ‚îÇ
                         consume  ‚îÇ
                                  ‚îÇ
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ  Celery Workers   ‚îÇ
                         ‚îÇ  (3-5 processes)  ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 5.2 Types de T√¢ches

| T√¢che | Dur√©e | Priorit√© | Description |
|-------|-------|----------|-------------|
| **process_pdf_batch** | 2-5 min | High | Traitement PDF A3/A4 batch |
| **ocr_copy_header** | 10-30s | Medium | OCR identification √©l√®ve |
| **export_results_csv** | 30s-2min | Low | Export notes CSV/Excel |
| **send_notification** | 1-2s | High | Notifications enseignants |
| **cleanup_old_files** | 5-10min | Low | Nettoyage fichiers temporaires |

#### 5.3 Configuration

```python
# settings.py
CELERY_BROKER_URL = 'redis://redis:6379/0'
CELERY_RESULT_BACKEND = 'redis://redis:6379/0'
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'
CELERY_ACCEPT_CONTENT = ['json']
CELERY_TASK_TRACK_STARTED = True
CELERY_TASK_TIME_LIMIT = 30 * 60  # 30 minutes max
```

---

### 6. Redis - Cache et Broker

**R√¥les multiples** :

1. **Cache Django** :
   - Sessions utilisateur
   - R√©sultats de requ√™tes co√ªteuses
   - Cache de templates

2. **Celery Broker** :
   - Queue de messages pour t√¢ches asynchrones
   - R√©sultats des t√¢ches

3. **Rate Limiting** :
   - Limitation des tentatives de login
   - Protection contre brute force

---

### 7. Stockage Fichiers

**Organisation du dossier `/media/`** :

```
/media/
‚îú‚îÄ‚îÄ exams/
‚îÇ   ‚îú‚îÄ‚îÄ source/                     # PDFs originaux upload√©s
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exam_{uuid}.pdf         # 50-200 MB
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ pages/                      # Pages extraites individuelles
‚îÇ       ‚îú‚îÄ‚îÄ exam_{uuid}/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ page_001.png        # ~500 KB chacune
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ page_002.png
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ copies/
‚îÇ   ‚îú‚îÄ‚îÄ booklets/                   # Cahiers par √©tudiant
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ copy_{uuid}/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booklet_1.pdf       # 2-4 pages
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booklet_2.pdf
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ annotated/                  # Copies corrig√©es avec annotations
‚îÇ       ‚îú‚îÄ‚îÄ copy_{uuid}_annotated.pdf
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ temp/                           # Fichiers temporaires (auto-cleanup)
    ‚îî‚îÄ‚îÄ uploads/
```

**Volum√©trie estim√©e** :
- 1 examen (50 √©l√®ves, 4 pages) : ~100 MB
- 1 an (10 examens) : ~1 GB
- 3 ans : ~3 GB

---

## üîÑ Flux de Donn√©es Complet

```
1. Admin Upload PDF
   ‚îî‚îÄ> Nginx ‚îÄ‚îÄ> Django ‚îÄ‚îÄ> /media/exams/source/

2. Traitement Async
   ‚îî‚îÄ> Celery Task ‚îÄ‚îÄ> PDF Splitter ‚îÄ‚îÄ> /media/exams/pages/

3. OCR Identification
   ‚îî‚îÄ> Multi-layer OCR ‚îÄ‚îÄ> Matching CSV ‚îÄ‚îÄ> DB (Copy.student_id)

4. Anonymisation
   ‚îî‚îÄ> Generate anonymous_id ‚îÄ‚îÄ> DB (Copy.anonymous_id)

5. Distribution Correcteurs
   ‚îî‚îÄ> Assign corrector_id ‚îÄ‚îÄ> Update Copy.corrector_id

6. Correction
   ‚îî‚îÄ> Frontend Annotations ‚îÄ‚îÄ> API REST ‚îÄ‚îÄ> DB (Grade, Annotation)

7. Finalisation
   ‚îî‚îÄ> Lock Copy ‚îÄ‚îÄ> Calculate final score ‚îÄ‚îÄ> StudentResult

8. Publication
   ‚îî‚îÄ> Generate annotated PDF ‚îÄ‚îÄ> /media/copies/annotated/
```

---

## üìä Performance et Scalabilit√©

### Optimisations Actuelles

1. **Database** :
   - Index sur champs fr√©quents (exam_id, student_id, status)
   - Connection pooling (CONN_MAX_AGE=60)
   - Query optimization (select_related, prefetch_related)

2. **Backend** :
   - Gunicorn avec 3 workers
   - Celery pour t√¢ches longues
   - Redis cache pour r√©sultats co√ªteux

3. **Frontend** :
   - Code splitting (lazy loading routes)
   - Asset optimization (minification, tree-shaking)
   - CDN pour assets statiques

4. **Nginx** :
   - Gzip compression
   - Cache des fichiers statiques
   - Keep-alive connections

### Capacit√©

**Configuration actuelle** (serveur production) :
- **Utilisateurs simultan√©s** : 50-100
- **Examens actifs** : 5-10
- **Copies en correction** : 500-1000
- **Stockage** : 100 GB (3 ans d'historique)

**Scaling futur** :
- Horizontal scaling : Load balancer + Multiple backends
- Database read replicas
- CDN pour fichiers m√©dia
- Object storage (S3) pour PDFs

---

## üîí S√©curit√©

### Niveaux de S√©curit√©

1. **Transport** :
   - HTTPS/TLS 1.3
   - HSTS headers
   - SSL certificate (Let's Encrypt)

2. **Application** :
   - CSRF protection
   - XSS prevention (Content Security Policy)
   - SQL injection protection (Django ORM)
   - Authentication (session-based)
   - Rate limiting (django-ratelimit)

3. **Donn√©es** :
   - Passwords hashed (PBKDF2)
   - Anonymisation des copies
   - Audit trail complet
   - Backup quotidien chiffr√©

4. **Infrastructure** :
   - Firewall (ports 80, 443 uniquement)
   - Docker isolation
   - User permissions (non-root)
   - Security updates automatiques

---

## üìà Monitoring et Observabilit√©

### M√©triques Expos√©es

```python
# /api/metrics/ (Prometheus format)
http_requests_total
http_request_duration_seconds
celery_tasks_total
celery_task_duration_seconds
database_connections_active
redis_connected_clients
```

### Logs Structur√©s

```python
# Format JSON pour parsing facile
{
    "timestamp": "2026-02-03T10:00:00Z",
    "level": "INFO",
    "logger": "django.request",
    "message": "POST /api/exams/",
    "user_id": 15,
    "request_id": "abc-123",
    "duration_ms": 245
}
```

### Health Checks

```
GET /api/health/live/     ‚Üí {"status": "alive"}
GET /api/health/ready/    ‚Üí {"status": "ready", "database": "ok", "redis": "ok"}
GET /api/health/          ‚Üí {"status": "healthy", "database": "connected"}
```

---

## üéì Conclusion

L'architecture Korrigo est con√ßue pour √™tre :
- **Modulaire** : Chaque composant peut √©voluer ind√©pendamment
- **Scalable** : Peut g√©rer la croissance des utilisateurs et donn√©es
- **Maintenable** : Code structur√©, document√©, test√©
- **S√©curis√©e** : Multiples couches de s√©curit√©
- **Performante** : Optimisations √† tous les niveaux

---

**Document r√©dig√© par :**
**Alaeddine BEN RHOUMA**
*Lead Senior Documentation & Architecture*
Date : 3 F√©vrier 2026
