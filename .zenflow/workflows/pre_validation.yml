# WORKFLOW DE VALIDATION CRITIQUE - KORRIGO PMF
# Objectif : Zéro régression sur la plateforme d'examen.

name: "Swiss Watch Validation"

on_completion:
  steps:
    - name: "Health Check Système"
      skill: "check_backend_health"
      critical: true
      on_failure: "STOP_AND_REPORT"

    - name: "Vérification Intégrité PDF"
      skill: "verify_pdf_validators"
      critical: true
      description: "S'assure que les modifications n'ont pas affaibli la sécurité des uploads."

    - name: "Tests du Moteur de Correction"
      skill: "run_grading_tests"
      critical: true
      description: "Validation automatique du calcul des points et des annotations."

    - name: "Audit Frontend"
      skill: "frontend_type_check"
      critical: false
      on_failure: "WARN_USER"

  final_check:
    - "Vérifier que le code est appliqué DIRECTEMENT sur le dossier principal."
    - "Vérifier l'absence de fichiers temporaires ou de branches de travail résiduelles."
